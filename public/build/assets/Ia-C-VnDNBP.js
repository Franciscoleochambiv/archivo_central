import{f as i,o as a,g as n,b as t,F as c,m as h,i as u,p,q as m,t as d}from"./app-CfL62DiI.js";import{_ as f}from"./_plugin-vue_export-helper-DlAUqK2U.js";const b={data(){return{isOpen:!1,messages:[],newMessage:"",isLoading:!1}},mounted(){const o=localStorage.getItem("iaMessages");o&&(this.messages=JSON.parse(o))},methods:{toggleChat(){this.isOpen=!this.isOpen,this.isOpen&&this.scrollToBottom()},sendMessage(){this.newMessage.trim()&&(this.messages.push({text:this.newMessage,isUser:!0}),this.saveMessages(),this.scrollToBottom(),this.getResponseFromServer(this.newMessage),this.newMessage="")},async getResponseFromServer(o){this.isLoading=!0;try{const s=await axios.post("/api/ia_datos",{question:o});this.messages.push({text:s.data.answer,isUser:!1}),this.saveMessages(),this.scrollToBottom()}catch(s){console.error("Error al obtener la respuesta del servidor:",s)}finally{this.isLoading=!1}},saveMessages(){localStorage.setItem("iaMessages",JSON.stringify(this.messages))},scrollToBottom(){this.$nextTick(()=>{const o=this.$refs.chatContainer;o.scrollTop=o.scrollHeight})}}},x={key:0,class:"fixed bottom-16 right-5"},y={key:1,class:"fixed bottom-16 right-5 w-96 bg-white border border-blue-300 rounded-lg shadow-lg"},v={class:"flex justify-between items-center bg-blue-100 text-gray p-3 rounded-t-lg"},_={class:"p-4 h-64 overflow-y-auto",ref:"chatContainer"},w={key:0,class:"text-right"},M={class:"bg-blue-300 text-white rounded-lg px-3 py-1 inline-block"},C={key:1,class:"text-left"},k={class:"bg-gray-100 text-gray-700 rounded-lg px-3 py-1 inline-block"},O={class:"p-3 border-t"},B={key:0,class:"flex justify-center mb-2"},S=["disabled"];function T(o,s,L,I,r,l){return a(),i("div",null,[r.isOpen?n("",!0):(a(),i("div",x,[t("button",{onClick:s[0]||(s[0]=(...e)=>l.toggleChat&&l.toggleChat(...e)),class:"bg-blue-500 text-white px-4 py-2 rounded-full shadow-lg"}," Chat Calculos ")])),r.isOpen?(a(),i("div",y,[t("div",v,[s[4]||(s[4]=t("h2",{class:"text-lg font-semibold"},"IA Calculos",-1)),t("button",{onClick:s[1]||(s[1]=(...e)=>l.toggleChat&&l.toggleChat(...e)),class:"text-gray-700"},"X")]),t("div",_,[(a(!0),i(c,null,h(r.messages,(e,g)=>(a(),i("div",{key:g,class:"mb-2"},[e.isUser?(a(),i("div",w,[t("span",M,d(e.text),1)])):(a(),i("div",C,[t("span",k,d(e.text),1)]))]))),128))],512),t("div",O,[r.isLoading?(a(),i("div",B,s[5]||(s[5]=[t("div",{class:"loader"},null,-1)]))):n("",!0),u(t("input",{"onUpdate:modelValue":s[2]||(s[2]=e=>r.newMessage=e),onKeyup:s[3]||(s[3]=m((...e)=>l.sendMessage&&l.sendMessage(...e),["enter"])),type:"text",placeholder:"Escribe un mensaje...",class:"w-full rounded-lg border-gray-300 focus:border-blue-500 focus:ring-indigo-500 p-4 pe-12 text-sm shadow-sm",disabled:r.isLoading},null,40,S),[[p,r.newMessage]])])])):n("",!0)])}const U=f(b,[["render",T],["__scopeId","data-v-b92e3a4c"]]);export{U as default};
