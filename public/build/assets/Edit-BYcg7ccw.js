import{f as d,o as l,a as f,u as b,Z as c,w as h,b as e,d as x,t as w,i as s,p as a,F as y}from"./app-Bl8UmmZP.js";import{_ as v}from"./AuthenticatedLayout-BQNGlJ7t.js";import{S as p}from"./sweetalert2.esm.all-BQIkj5Wb.js";import"./ApplicationLogo-D2MtjczB.js";import"./_plugin-vue_export-helper-DlAUqK2U.js";import"./Chat-CXiqISL9.js";import"./Ia-CXDqMw2d.js";const $={class:"mx-auto max-w-screen-xl w-full px-4 py-2 sm:px-6 lg:px-8"},N={class:"mx-auto max-w-full"},V={class:"text-center custom-paragraph text-lg font-medium bg-indigo-600 text-white rounded-full py-2 px-4"},D={class:"relative"},k={class:"flex flex-wrap gap-4 mt-4"},O={class:"relative flex-1 min-w-[250px]"},B={class:"relative flex-1 min-w-[250px]"},S={class:"relative flex-1 min-w-[250px]"},U={class:"relative mt-4"},q={key:0},E={key:1,class:"absolute top-1/2 left-1/2 transform -translate-x-1/2 -translate-y-1/2"},L={props:["auth"],data(){return{emailValue:"",importacion:!0,email:"",form:{id:"",nombre:"",latitud:0,longitud:0,radio:0,direccion:""}}},mounted(){this.auth&&this.auth.user&&this.auth.user.email&&(this.emailValue=this.auth.user.email);const i=this.$page.props.id;i&&axios.get(`/api/obra/${i}`).then(o=>{this.form.nombre=o.data[0].nombre,this.form.id=o.data[0].id,this.form.latitud=Number(o.data[0].latitud),this.form.longitud=Number(o.data[0].longitud),this.form.radio=Number(o.data[0].radio),this.form.direccion=o.data[0].direccion}).catch(o=>{console.error("Error al obtener los detalles:",o)})},methods:{submit(i){i.preventDefault(),this.importacion=!1,this.form.userid=JSON.stringify(this.auth.user.id),console.log(this.$page.props.id),axios.put(`/api/obramodifica/${this.$page.props.id}`,this.form).then(o=>{this.importacion=!0,this.form.nombre="",this.form.latitud=0,this.form.longitud=0,this.form.radio=0,this.form.direccion="",this.$nextTick(()=>{this.$refs.nombre_cargo&&this.$refs.nombre_cargo.focus()}),p.fire({title:"Mensaje",text:"Documento Grabado",icon:"success",timer:1e3,timerProgressBar:!0,showConfirmButton:!1}),this.$inertia.visit("/listobras",{method:"get"})}).catch(o=>{var n,u,m;this.importacion=!0,this.form.nombre="",this.form.latitud=0,this.form.longitud=0,this.form.radio=0,this.form.direccion="";const t=((u=(n=o.response)==null?void 0:n.data)==null?void 0:u.message)||o.message||"Error desconocido",r=((m=o.response)==null?void 0:m.data)||{};p.fire({icon:"error",title:"Error en la grabaci贸n del documento",text:`Ocurri贸 un error al intentar grabar: ${t}`,footer:`<pre>${JSON.stringify(r,null,2)}</pre>`,confirmButtonText:"Aceptar"}).then(g=>{g.isConfirmed&&console.error("Detalles del error:",o)})})}}},R=Object.assign(L,{__name:"Edit",setup(i){return(o,t)=>(l(),d(y,null,[f(b(c),{title:"Onp"}),f(v,null,{default:h(()=>[e("div",$,[e("div",N,[t[14]||(t[14]=e("h1",{class:"text-center text-2xl font-bold text-black-600 sm:text-3xl"},"Obras",-1)),e("form",{onSubmit:t[5]||(t[5]=x((...r)=>o.submit&&o.submit(...r),["prevent"])),enctype:"multipart/form-data",class:"mb-0 mt-3 space-y-4 rounded-lg p-4 shadow-2xl sm:p-6 lg:p-8"},[e("p",V," Usuario - "+w(o.$page.props.auth.user.name),1),t[12]||(t[12]=e("p",{class:"text-center custom-paragraph text-lg font-medium bg-indigo-600 text-white rounded-full py-2 px-4"}," Obras ",-1)),e("div",null,[e("div",D,[t[6]||(t[6]=e("label",{for:"nombre"},"Nombre:",-1)),s(e("input",{type:"text",class:"w-full rounded-lg border-gray-300 focus:border-red-500 focus:ring-indigo-500 p-4 pe-12 text-sm shadow-sm",placeholder:"Nombre","onUpdate:modelValue":t[0]||(t[0]=r=>o.form.nombre=r),ref:"nombre",id:"nombre",name:"nombre",required:""},null,512),[[a,o.form.nombre]])]),e("div",k,[e("div",O,[t[7]||(t[7]=e("label",{for:"latitud"},"Latitud:",-1)),s(e("input",{type:"text",class:"w-full rounded-lg border-gray-300 focus:border-red-500 focus:ring-indigo-500 p-4 text-sm shadow-sm",placeholder:"Latitud","onUpdate:modelValue":t[1]||(t[1]=r=>o.form.latitud=r),ref:"latitud",id:"latitud",name:"latitud",required:""},null,512),[[a,o.form.latitud]])]),e("div",B,[t[8]||(t[8]=e("label",{for:"longitud"},"Longitud:",-1)),s(e("input",{type:"text",class:"w-full rounded-lg border-gray-300 focus:border-red-500 focus:ring-indigo-500 p-4 text-sm shadow-sm",placeholder:"Longitud","onUpdate:modelValue":t[2]||(t[2]=r=>o.form.longitud=r),ref:"longitud",id:"longitud",name:"longitud",required:""},null,512),[[a,o.form.longitud]])]),e("div",S,[t[9]||(t[9]=e("label",{for:"radio"},"Radio:",-1)),s(e("input",{type:"text",class:"w-full rounded-lg border-gray-300 focus:border-red-500 focus:ring-indigo-500 p-4 text-sm shadow-sm",placeholder:"Radio","onUpdate:modelValue":t[3]||(t[3]=r=>o.form.radio=r),ref:"radio",id:"radio",name:"radio",required:""},null,512),[[a,o.form.radio]])])]),e("div",U,[t[10]||(t[10]=e("label",{for:"direccion"},"Direcci贸n:",-1)),s(e("input",{type:"text",class:"w-full rounded-lg border-gray-300 focus:border-red-500 focus:ring-indigo-500 p-4 pe-12 text-sm shadow-sm",placeholder:"Direcci贸n","onUpdate:modelValue":t[4]||(t[4]=r=>o.form.direccion=r),ref:"direccion",id:"direccion",name:"direccion",required:""},null,512),[[a,o.form.direccion]])])]),o.importacion?(l(),d("div",q)):(l(),d("div",E,t[11]||(t[11]=[e("div",{class:"ml-2 absolute animate-spin rounded-full h-10 w-10 border-t-8 border-red-500"},null,-1)]))),t[13]||(t[13]=e("button",{type:"submit",class:"block w-full custom-paragraph rounded-lg bg-indigo-600 px-5 py-3 text-sm font-medium text-white"}," Grabar ",-1))],32)])])]),_:1})],64))}});export{R as default};
