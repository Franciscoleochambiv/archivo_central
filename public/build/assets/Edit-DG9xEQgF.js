import{f as i,o as n,a as f,u as g,Z as b,w as c,b as s,d as w,t as u,i as a,F as m,m as p,l as t,p as l}from"./app-Bl8UmmZP.js";import{_ as v}from"./AuthenticatedLayout-BQNGlJ7t.js";import"./ApplicationLogo-D2MtjczB.js";import"./_plugin-vue_export-helper-DlAUqK2U.js";import"./Chat-CXiqISL9.js";import"./Ia-CXDqMw2d.js";const y={class:"mx-auto max-w-screen-xl w-full px-4 py-2 sm:px-6 lg:px-8"},x={class:"mx-auto max-w-full"},h={class:"max-w-5xl mx-auto p-6 bg-white dark:bg-gray-800 rounded-lg shadow-md"},U={class:"text-center custom-paragraph text-lg font-medium bg-red-400 text-white rounded-full py-2 px-4"},V={class:"grid grid-cols-1 md:grid-cols-2 gap-4"},E=["value"],A=["value"],k={class:"col-span-full"},D={class:"mb-2 space-y-1"},S={class:"text-sm text-gray-700"},C=["href"],O={data(){return{expedienteId:null,oficinas:[],entidades:[],archivos:[],form:{oficina_id:"",entidad_id:"",periodo:"",anio_elaboracion:"",seccion:"",fechas_extremos:"",nro_archivo:"",unidad_conservacion:"",serie_documental:"",nro_comprobantes:"",ubicacion_estante:"",valor_serie_documental:"T",folios:"",soporte_papel:"",es_copia_original:1,anio_extremo_inicio:"",anio_extremo_fin:"",color:"",observaciones:"",estado_archivador:"B",ubicacion_actual:"A.C"}}},methods:{async cargarExpediente(){const d=await axios.get(`/api/expedientes/${this.expedienteId}`);console.log(d.data),this.form={...this.form,...d.data}},async cargarOficinas(){const d=await axios.get("/api/oficinaexcel");this.oficinas=d.data},async cargarEntidades(){const d=await axios.get("/api/entidades");this.entidades=d.data},handleArchivos(d){this.archivos=Array.from(d.target.files)},async actualizar(){const d=new FormData;for(const r in this.form)d.append(r,this.form[r]);for(const r of this.archivos)d.append("documentos[]",r);await axios.post(`/api/expedientes/${this.expedienteId}?_method=PUT`,d),this.$inertia.visit("/listobras",{method:"get"}),alert("Expediente actualizado correctamente")}},mounted(){const d=window.location.pathname.split("/");this.expedienteId=d[d.length-1],this.cargarOficinas(),this.cargarEntidades(),this.cargarExpediente()}},N=Object.assign(O,{__name:"Edit",setup(d){return(r,o)=>(n(),i(m,null,[f(g(b),{title:"Edicion"}),f(v,null,{default:c(()=>[s("div",y,[s("div",x,[o[32]||(o[32]=s("h2",{class:"text-center text-2xl font-bold text-black-600 sm:text-3xl"},"Edición de Expediente",-1)),s("div",h,[s("form",{onSubmit:o[22]||(o[22]=w((...e)=>r.actualizar&&r.actualizar(...e),["prevent"])),enctype:"multipart/form-data"},[s("p",U," Usuario - "+u(r.$page.props.auth.user.name),1),s("div",V,[s("div",null,[o[23]||(o[23]=s("label",{class:"text-sm text-gray-600"},"Oficina",-1)),a(s("select",{"onUpdate:modelValue":o[0]||(o[0]=e=>r.form.oficina_id=e),class:"w-full rounded-lg border-gray-300 focus:border-red-500 focus:ring-indigo-500 p-2 pe-12 text-sm shadow-sm"},[(n(!0),i(m,null,p(r.oficinas,e=>(n(),i("option",{value:e.id,key:e.id},u(e.nombre),9,E))),128))],512),[[t,r.form.oficina_id]])]),s("div",null,[o[24]||(o[24]=s("label",{class:"text-sm text-gray-600"},"Entidad",-1)),a(s("select",{"onUpdate:modelValue":o[1]||(o[1]=e=>r.form.entidad_id=e),class:"w-full rounded-lg border-gray-300 focus:border-red-500 focus:ring-indigo-500 p-2 pe-12 text-sm shadow-sm"},[(n(!0),i(m,null,p(r.entidades,e=>(n(),i("option",{value:e.id,key:e.id},u(e.nombre),9,A))),128))],512),[[t,r.form.entidad_id]])]),a(s("input",{"onUpdate:modelValue":o[2]||(o[2]=e=>r.form.periodo=e),placeholder:"Periodo",class:"w-full rounded-lg border-gray-300 focus:border-red-500 focus:ring-indigo-500 p-2 pe-12 text-sm shadow-sm"},null,512),[[l,r.form.periodo]]),a(s("input",{"onUpdate:modelValue":o[3]||(o[3]=e=>r.form.anio_elaboracion=e),placeholder:"Año elaboración",class:"w-full rounded-lg border-gray-300 focus:border-red-500 focus:ring-indigo-500 p-2 pe-12 text-sm shadow-sm"},null,512),[[l,r.form.anio_elaboracion]]),a(s("input",{"onUpdate:modelValue":o[4]||(o[4]=e=>r.form.seccion=e),placeholder:"Sección",class:"w-full rounded-lg border-gray-300 focus:border-red-500 focus:ring-indigo-500 p-2 pe-12 text-sm shadow-sm"},null,512),[[l,r.form.seccion]]),a(s("input",{type:"date","onUpdate:modelValue":o[5]||(o[5]=e=>r.form.fechas_extremos=e),class:"w-full rounded-lg border-gray-300 focus:border-red-500 focus:ring-indigo-500 p-2 pe-12 text-sm shadow-sm"},null,512),[[l,r.form.fechas_extremos]]),a(s("input",{"onUpdate:modelValue":o[6]||(o[6]=e=>r.form.nro_archivo=e),placeholder:"Nro archivo",class:"w-full rounded-lg border-gray-300 focus:border-red-500 focus:ring-indigo-500 p-2 pe-12 text-sm shadow-sm"},null,512),[[l,r.form.nro_archivo]]),a(s("input",{"onUpdate:modelValue":o[7]||(o[7]=e=>r.form.unidad_conservacion=e),placeholder:"Unidad conservación",class:"w-full rounded-lg border-gray-300 focus:border-red-500 focus:ring-indigo-500 p-2 pe-12 text-sm shadow-sm"},null,512),[[l,r.form.unidad_conservacion]]),a(s("input",{"onUpdate:modelValue":o[8]||(o[8]=e=>r.form.serie_documental=e),placeholder:"Serie documental",class:"w-full rounded-lg border-gray-300 focus:border-red-500 focus:ring-indigo-500 p-2 pe-12 text-sm shadow-sm"},null,512),[[l,r.form.serie_documental]]),a(s("input",{"onUpdate:modelValue":o[9]||(o[9]=e=>r.form.nro_comprobantes=e),placeholder:"Nro comprobantes",class:"w-full rounded-lg border-gray-300 focus:border-red-500 focus:ring-indigo-500 p-2 pe-12 text-sm shadow-sm"},null,512),[[l,r.form.nro_comprobantes]]),a(s("input",{"onUpdate:modelValue":o[10]||(o[10]=e=>r.form.ubicacion_estante=e),placeholder:"Ubicación estante",class:"w-full rounded-lg border-gray-300 focus:border-red-500 focus:ring-indigo-500 p-2 pe-12 text-sm shadow-sm"},null,512),[[l,r.form.ubicacion_estante]]),a(s("select",{"onUpdate:modelValue":o[11]||(o[11]=e=>r.form.valor_serie_documental=e),class:"w-full rounded-lg border-gray-300 focus:border-red-500 focus:ring-indigo-500 p-2 pe-12 text-sm shadow-sm"},o[25]||(o[25]=[s("option",{value:"T"},"Temporal",-1),s("option",{value:"P"},"Permanente",-1)]),512),[[t,r.form.valor_serie_documental]]),a(s("input",{"onUpdate:modelValue":o[12]||(o[12]=e=>r.form.folios=e),placeholder:"Folios",class:"w-full rounded-lg border-gray-300 focus:border-red-500 focus:ring-indigo-500 p-2 pe-12 text-sm shadow-sm"},null,512),[[l,r.form.folios]]),a(s("input",{"onUpdate:modelValue":o[13]||(o[13]=e=>r.form.soporte_papel=e),placeholder:"Soporte papel",class:"w-full rounded-lg border-gray-300 focus:border-red-500 focus:ring-indigo-500 p-2 pe-12 text-sm shadow-sm"},null,512),[[l,r.form.soporte_papel]]),a(s("select",{"onUpdate:modelValue":o[14]||(o[14]=e=>r.form.es_copia_original=e),class:"w-full rounded-lg border-gray-300 focus:border-red-500 focus:ring-indigo-500 p-2 pe-12 text-sm shadow-sm"},o[26]||(o[26]=[s("option",{value:1},"Sí",-1),s("option",{value:0},"No",-1)]),512),[[t,r.form.es_copia_original]]),a(s("input",{"onUpdate:modelValue":o[15]||(o[15]=e=>r.form.anio_extremo_inicio=e),placeholder:"Año extremo inicio",class:"w-full rounded-lg border-gray-300 focus:border-red-500 focus:ring-indigo-500 p-2 pe-12 text-sm shadow-sm"},null,512),[[l,r.form.anio_extremo_inicio]]),a(s("input",{"onUpdate:modelValue":o[16]||(o[16]=e=>r.form.anio_extremo_fin=e),placeholder:"Año extremo fin",class:"w-full rounded-lg border-gray-300 focus:border-red-500 focus:ring-indigo-500 p-2 pe-12 text-sm shadow-sm"},null,512),[[l,r.form.anio_extremo_fin]]),a(s("input",{"onUpdate:modelValue":o[17]||(o[17]=e=>r.form.color=e),placeholder:"Color",class:"w-full rounded-lg border-gray-300 focus:border-red-500 focus:ring-indigo-500 p-2 pe-12 text-sm shadow-sm"},null,512),[[l,r.form.color]]),a(s("textarea",{"onUpdate:modelValue":o[18]||(o[18]=e=>r.form.observaciones=e),placeholder:"Observaciones",class:"w-full rounded-lg border-gray-300 focus:border-red-500 focus:ring-indigo-500 p-2 pe-12 text-sm shadow-sm"},null,512),[[l,r.form.observaciones]]),a(s("select",{"onUpdate:modelValue":o[19]||(o[19]=e=>r.form.estado_archivador=e),class:"w-full rounded-lg border-gray-300 focus:border-red-500 focus:ring-indigo-500 p-2 pe-12 text-sm shadow-sm"},o[27]||(o[27]=[s("option",{value:"B"},"Bueno",-1),s("option",{value:"M"},"Mal estado",-1),s("option",{value:"R"},"Regular",-1)]),512),[[t,r.form.estado_archivador]]),a(s("select",{"onUpdate:modelValue":o[20]||(o[20]=e=>r.form.ubicacion_actual=e),class:"w-full rounded-lg border-gray-300 focus:border-red-500 focus:ring-indigo-500 p-2 pe-12 text-sm shadow-sm"},o[28]||(o[28]=[s("option",{value:"A.C"},"Archivo Central",-1),s("option",{value:"PRESTAMO"},"Préstamo",-1),s("option",{value:"DEVUELTO"},"Devuelto",-1)]),512),[[t,r.form.ubicacion_actual]]),s("div",k,[o[29]||(o[29]=s("label",{class:"text-sm text-gray-600 mb-1 block"},"Documentos adjuntos actuales",-1)),s("ul",D,[(n(!0),i(m,null,p(r.form.documentos,e=>(n(),i("li",{key:e.id,class:"flex items-center justify-between bg-gray-100 p-2 rounded"},[s("span",S,u(e.nombre),1),s("a",{href:`/storage/${e.ruta}`,class:"text-blue-600 hover:underline text-sm",target:"_blank",rel:"noopener"}," Descargar ",8,C)]))),128))]),o[30]||(o[30]=s("label",{class:"text-sm text-gray-600"},"Cambiar / agregar documentos",-1)),s("input",{type:"file",multiple:"",onChange:o[21]||(o[21]=(...e)=>r.handleArchivos&&r.handleArchivos(...e))},null,32)])]),o[31]||(o[31]=s("div",{class:"mt-4"},[s("button",{class:"bg-red-400 hover:bg-red-700 text-white px-4 py-2 rounded",type:"submit"},"Actualizar")],-1))],32)])])])]),_:1})],64))}});export{N as default};
