import{f as a,o as d,a as m,u as c,Z as h,w as b,b as s,d as w,t as u,e as n,i,p as l,g as v,F as f,m as y,l as p}from"./app-CfL62DiI.js";import{_ as x}from"./AuthenticatedLayout-QePhxG6N.js";import{S as g}from"./sweetalert2.esm.all-BQIkj5Wb.js";import"./ApplicationLogo-CM4Kn49N.js";import"./_plugin-vue_export-helper-DlAUqK2U.js";import"./Chat-Dt6yl0WE.js";import"./Ia-C-VnDNBP.js";const V={class:"mx-auto max-w-screen-xl w-full px-4 py-2 sm:px-6 lg:px-8"},S={class:"mx-auto max-w-full"},M={class:"text-center custom-paragraph text-lg font-medium bg-indigo-600 text-white rounded-full py-2 px-4"},E={class:"flex"},U={class:"relative flex-row w-1/3"},_={class:"relative flex-row w-1/3 pl-2"},k={class:"relative flex-row w-1/3 pl-2"},$={class:"flex"},A={class:"relative flex-row w-1/3"},C={class:"relative flex-row w-1/3 pl-2"},N={class:"relative flex-row w-1/3 pl-2"},q={class:"relative"},O={key:0,class:"absolute z-10 mt-1 w-full bg-white rounded-lg shadow-lg"},G=["onClick"],j={class:"flex"},B={class:"relative flex-row w-1/2"},D={class:"relative flex-row w-1/2 pl-2"},I={class:"flex"},P={class:"relative flex-row w-1/3"},T={class:"relative flex-row w-1/3"},H={class:"relative flex-row w-1/3 pl-2"},L={class:"relative"},F={key:0},R={key:1,class:"absolute top-1/2 left-1/2 transform -translate-x-1/2 -translate-y-1/2"},z={props:["auth"],data(){return{emailValue:"",importacion:!0,email:"",saldos:{ingresos:0,egresos:0},form:{id:"",id_meta:"",cod_meta:"",meta:"",fecha:"",cantidad:"",tipo_doc:"",tipo_combustible:"",nro_doc:"",detalle:"",userid:""},sugerencias:[]}},mounted(){this.obtenerSaldos(),this.auth&&this.auth.user&&this.auth.user.name&&(this.emailValue=this.auth.user.email),this.$refs.asunto&&this.$refs.asunto.focus();const r=this.$page.props.id;r&&axios.get(`/api/movi/${r}`).then(o=>{this.form.cantidad=o.data[0].cantidad,this.form.fecha=o.data[0].fecha,this.form.tipo_doc=o.data[0].tipo_doc,this.form.tipo_combustible=o.data[0].tipo_combustible,this.form.nro_doc=o.data[0].nro_doc,this.form.detalle=o.data[0].detalle,this.form.id_meta=o.data[0].id_meta,this.form.cod_meta=o.data[0].cod_meta,this.form.meta=o.data[0].meta,this.form.id=o.data[0].id,console.log(o.data)}).catch(o=>{console.error("Error al obtener los detalles del movimiento:",o)})},methods:{obtenerSaldos(){axios.get("/api/saldos").then(r=>{this.saldos=r.data}).catch(r=>{console.error("Error al obtener los saldos:",r)})},buscarMetasm(){this.form.meta.length>0?fetch(`/api/metas?q=${this.form.meta}`).then(r=>r.json()).then(r=>{this.sugerencias=r}).catch(r=>{console.error("Error al buscar sugerencias:",r)}):this.sugerencias=[]},seleccionarSugerencia(r){this.form.meta=r.descripcion,this.form.cod_meta=r.codigo,this.form.id_meta=r.id,this.sugerencias=[]},submit(r){r.preventDefault(),this.importacion=!1,this.form.userid=JSON.stringify(this.auth.user.id),axios.put("/api/movimientos/"+this.form.id,this.form).then(o=>{this.importacion=!0,this.form.id_meta="",this.form.fecha="",this.form.meta="",this.form.cantidad="",this.form.nro_doc="",this.form.detalle="",this.form.userid="",this.$nextTick(()=>{this.$refs.meta.focus()}),this.obtenerSaldos(),g.fire({title:"Mensaje",text:"Documento Grabado",icon:"success",timer:1e3,timerProgressBar:!0,showConfirmButton:!1}),this.$inertia.visit("/listado",{method:"get"})}).catch(o=>{this.importacion=!0,this.form.meta="",this.form.tipo_doc="",this.form.nro_doc="",this.form.detalle="",this.form.userid="",g.fire({icon:"error",title:"Error en la grabacion del documento",text:"Ocurrio un error al intentar grabar el registro revise el tamaño de archivo",confirmButtonText:"Aceptar"}).then(e=>{e.isConfirmed&&console.log("El usuario aceptó el mensaje de error.")})})}}},oe=Object.assign(z,{__name:"Editm",setup(r){return(o,e)=>(d(),a(f,null,[m(c(h),{title:"Dashboard"}),m(x,null,{default:b(()=>[s("div",V,[s("div",S,[e[27]||(e[27]=s("h1",{class:"text-center text-2xl font-bold text-black-600 sm:text-3xl"},"Modificacion - Control de Combustible",-1)),s("form",{onSubmit:e[14]||(e[14]=w((...t)=>o.submit&&o.submit(...t),["prevent"])),enctype:"multipart/form-data",class:"mb-0 mt-3 space-y-4 rounded-lg p-4 shadow-2xl sm:p-6 lg:p-8"},[s("p",M," Usuario - "+u(o.$page.props.auth.user.name),1),s("div",E,[s("div",U,[e[15]||(e[15]=n(" Gasolina - Ingresos ")),i(s("input",{id:"egresos",type:"text",class:"w-full rounded-lg border-gray-300 focus:border-red-500 focus:ring-indigo-500 p-4 pe-12 text-sm shadow-sm","onUpdate:modelValue":e[0]||(e[0]=t=>o.saldos.ingresos_gasolina=t),readonly:""},null,512),[[l,o.saldos.ingresos_gasolina]])]),s("div",_,[e[16]||(e[16]=n(" Gasolina - Egresos ")),i(s("input",{type:"text",class:"w-full rounded-lg border-gray-300 focus:border-red-500 focus:ring-indigo-500 p-4 pe-12 text-sm shadow-sm","onUpdate:modelValue":e[1]||(e[1]=t=>o.saldos.egresos_gasolina=t),id:"egresos",readonly:""},null,512),[[l,o.saldos.egresos_gasolina]])]),s("div",k,[e[17]||(e[17]=n(" Gasolina - Saldos ")),i(s("input",{type:"text",class:"w-full rounded-lg border-gray-300 focus:border-red-500 focus:ring-indigo-500 p-4 pe-12 text-sm shadow-sm","onUpdate:modelValue":e[2]||(e[2]=t=>o.saldos.saldos_gasolina=t),id:"saldos",readonly:""},null,512),[[l,o.saldos.saldos_gasolina]])])]),s("div",$,[s("div",A,[e[18]||(e[18]=n(" Petroleo - Ingresos ")),i(s("input",{id:"egresos",type:"text",class:"w-full rounded-lg border-gray-300 focus:border-red-500 focus:ring-indigo-500 p-4 pe-12 text-sm shadow-sm","onUpdate:modelValue":e[3]||(e[3]=t=>o.saldos.ingresos_petroleo=t),readonly:""},null,512),[[l,o.saldos.ingresos_petroleo]])]),s("div",C,[e[19]||(e[19]=n(" Petroleo - Egresos ")),i(s("input",{type:"text",class:"w-full rounded-lg border-gray-300 focus:border-red-500 focus:ring-indigo-500 p-4 pe-12 text-sm shadow-sm","onUpdate:modelValue":e[4]||(e[4]=t=>o.saldos.egresos_petroleo=t),id:"egresos",readonly:""},null,512),[[l,o.saldos.egresos_petroleo]])]),s("div",N,[e[20]||(e[20]=n(" Petroleo - Saldos ")),i(s("input",{type:"text",class:"w-full rounded-lg border-gray-300 focus:border-red-500 focus:ring-indigo-500 p-4 pe-12 text-sm shadow-sm","onUpdate:modelValue":e[5]||(e[5]=t=>o.saldos.saldos_petroleo=t),id:"saldos",readonly:""},null,512),[[l,o.saldos.saldos_petroleo]])])]),e[25]||(e[25]=s("p",{class:"text-center custom-paragraph text-lg font-medium bg-indigo-600 text-white rounded-full py-2 px-4"}," Movimientos - Modificacion ",-1)),s("div",null,[s("div",q,[e[21]||(e[21]=s("label",{for:"asunto"},"Metas:",-1)),i(s("input",{type:"text",class:"w-full rounded-lg border-gray-300 focus:border-red-500 focus:ring-indigo-500 p-4 pe-12 text-sm shadow-sm","onUpdate:modelValue":e[6]||(e[6]=t=>o.form.meta=t),ref:"meta",id:"meta",name:"meta",required:"",placeholder:"Metas",autocomplete:"off",autofocus:"",onInput:e[7]||(e[7]=(...t)=>o.buscarMetasm&&o.buscarMetasm(...t))},null,544),[[l,o.form.meta]]),o.sugerencias.length>0?(d(),a("ul",O,[(d(!0),a(f,null,y(o.sugerencias,t=>(d(),a("li",{key:t.id,onClick:J=>o.seleccionarSugerencia(t),class:"cursor-pointer p-2 hover:bg-gray-100"},u(t.codigo)+"-"+u(t.descripcion),9,G))),128))])):v("",!0)])]),s("div",j,[s("div",B,[i(s("input",{type:"date",class:"w-full rounded-lg border-gray-300 focus:border-red-500 focus:ring-indigo-500 p-4 pe-12 text-sm shadow-sm",placeholder:"Nro de Vale","onUpdate:modelValue":e[8]||(e[8]=t=>o.form.fecha=t),ref:"input",id:"fecha",name:"fecha",required:""},null,512),[[l,o.form.fecha]])]),s("div",D,[i(s("input",{type:"text",class:"w-full rounded-lg border-gray-300 focus:border-red-500 focus:ring-indigo-500 p-4 pe-12 text-sm shadow-sm",placeholder:"Cantidad","onUpdate:modelValue":e[9]||(e[9]=t=>o.form.cantidad=t),ref:"input",id:"cantidad",name:"cantidad",required:""},null,512),[[l,o.form.cantidad]])])]),s("div",I,[s("div",P,[i(s("select",{name:"HeadlineAct",id:"HeadlineAct",class:"w-full rounded-lg border-gray-300 focus:border-red-500 focus:ring-indigo-500 p-4 pe-12 text-sm shadow-sm","onUpdate:modelValue":e[10]||(e[10]=t=>o.form.tipo_combustible=t),ref:"input",placeholder:"Escoja el tipo de Movimientos",required:""},e[22]||(e[22]=[s("option",{value:"0"},"GASOLINA",-1),s("option",{value:"1"},"PETROLEO",-1)]),512),[[p,o.form.tipo_combustible]])]),s("div",T,[i(s("select",{name:"HeadlineAct",id:"HeadlineAct",class:"w-full rounded-lg border-gray-300 focus:border-red-500 focus:ring-indigo-500 p-4 pe-12 text-sm shadow-sm","onUpdate:modelValue":e[11]||(e[11]=t=>o.form.tipo_doc=t),ref:"input",placeholder:"Escoja el tipo de Movimientos",required:""},e[23]||(e[23]=[s("option",{value:"1"},"INGRESO",-1),s("option",{value:"2"},"SALIDA",-1)]),512),[[p,o.form.tipo_doc]])]),s("div",H,[i(s("input",{type:"text",class:"w-full rounded-lg border-gray-300 focus:border-red-500 focus:ring-indigo-500 p-4 pe-12 text-sm shadow-sm",placeholder:"Nro de Vale","onUpdate:modelValue":e[12]||(e[12]=t=>o.form.nro_doc=t),ref:"input",id:"nro_doc",name:"nro_doc",required:""},null,512),[[l,o.form.nro_doc]])])]),s("div",L,[i(s("input",{type:"text",class:"w-full rounded-lg border-gray-300 focus:border-red-500 focus:ring-indigo-500 p-4 pe-12 text-sm shadow-sm",placeholder:"Observaciones ","onUpdate:modelValue":e[13]||(e[13]=t=>o.form.detalle=t),ref:"input",id:"detalle",name:"detalle",required:""},null,512),[[l,o.form.detalle]])]),o.importacion?(d(),a("div",F)):(d(),a("div",R,e[24]||(e[24]=[s("div",{class:"ml-2 absolute animate-spin rounded-full h-10 w-10 border-t-8 border-red-500"},null,-1)]))),e[26]||(e[26]=s("button",{type:"submit",class:"block w-full custom-paragraph rounded-lg bg-indigo-600 px-5 py-3 text-sm font-medium text-white"}," Grabar Modificacion ",-1))],32)])])]),_:1})],64))}});export{oe as default};
