import{f as i,o as r,g as l,b as t,F as h,m as c,i as p,p as u,q as m,t as d}from"./app-Bl8UmmZP.js";import{_ as f}from"./_plugin-vue_export-helper-DlAUqK2U.js";const b={data(){return{isOpen:!1,messages:[],newMessage:"",isLoading:!1}},mounted(){const o=localStorage.getItem("chatMessages");o&&(this.messages=JSON.parse(o))},methods:{toggleChat(){this.isOpen=!this.isOpen,this.isOpen&&this.scrollToBottom()},sendMessage(){this.newMessage.trim()&&(this.messages.push({text:this.newMessage,isUser:!0}),this.saveMessages(),this.scrollToBottom(),this.getResponseFromServer(this.newMessage),this.newMessage="")},async getResponseFromServer(o){this.isLoading=!0;try{const e=await axios.post("/api/obtener_ia",{question:o});console.log(e),this.messages.push({text:e.data.response,isUser:!1}),this.saveMessages(),this.scrollToBottom()}catch(e){console.error("Error al obtener la respuesta del servidor:",e)}finally{this.isLoading=!1}},saveMessages(){localStorage.setItem("chatMessages",JSON.stringify(this.messages))},scrollToBottom(){this.$nextTick(()=>{const o=this.$refs.chatContainer;o.scrollTop=o.scrollHeight})}}},x={key:0,class:"fixed bottom-5 right-5"},y={key:1,class:"fixed bottom-5 right-5 w-96 bg-white border border-red-300 rounded-lg shadow-lg"},v={class:"flex justify-between items-center bg-red-100 text-gray p-3 rounded-t-lg"},_={class:"p-4 h-64 overflow-y-auto",ref:"chatContainer"},w={key:0,class:"text-right"},M={class:"bg-red-300 text-white rounded-lg px-3 py-1 inline-block"},C={key:1,class:"text-left"},k={class:"bg-gray-100 text-gray-700 rounded-lg px-3 py-1 inline-block"},O={class:"p-3 border-t"},B={key:0,class:"flex justify-center mb-2"},S=["disabled"];function T(o,e,L,F,a,n){return r(),i("div",null,[a.isOpen?l("",!0):(r(),i("div",x,[t("button",{onClick:e[0]||(e[0]=(...s)=>n.toggleChat&&n.toggleChat(...s)),class:"bg-red-500 text-white px-4 py-2 rounded-full shadow-lg"}," Abrir Chat ")])),a.isOpen?(r(),i("div",y,[t("div",v,[e[4]||(e[4]=t("h2",{class:"text-lg font-semibold"},"Chat IA",-1)),t("button",{onClick:e[1]||(e[1]=(...s)=>n.toggleChat&&n.toggleChat(...s)),class:"text-white"},"X")]),t("div",_,[(r(!0),i(h,null,c(a.messages,(s,g)=>(r(),i("div",{key:g,class:"mb-2"},[s.isUser?(r(),i("div",w,[t("span",M,d(s.text),1)])):(r(),i("div",C,[t("span",k,d(s.text),1)]))]))),128))],512),t("div",O,[a.isLoading?(r(),i("div",B,e[5]||(e[5]=[t("div",{class:"loader"},null,-1)]))):l("",!0),p(t("input",{"onUpdate:modelValue":e[2]||(e[2]=s=>a.newMessage=s),onKeyup:e[3]||(e[3]=m((...s)=>n.sendMessage&&n.sendMessage(...s),["enter"])),type:"text",placeholder:"Escribe un mensaje...",class:"w-full rounded-lg border-gray-300 focus:border-red-500 focus:ring-indigo-500 p-4 pe-12 text-sm shadow-sm",disabled:a.isLoading},null,40,S),[[u,a.newMessage]])])])):l("",!0)])}const U=f(b,[["render",T],["__scopeId","data-v-7c4deb4e"]]);export{U as default};
